<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Rotational Labs | PubSub 101 - Creating Data Flows With Topics</title><base href=https://rotational.io/ target=_self><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Rotational Labs, Inc."><meta name=description content="In this module you will create custom data streams to solve a real-world, real-time analytics problem."><meta name=keywords content="Rotational Labs,Ensign,Cloud-native,Real-time data streaming platform,Data collaboration,Data automation,Rapid prototyping,Real-time machine learning,Real-time data analytics,Real-time applications,Data streams,Event streams,Event-sourcing databaseEvent log"><link type=text/plain rel=author href=https://rotational.io/humans.txt><meta property="og:title" content="PubSub 101 - Creating Data Flows With Topics"><meta property="og:description" content="In this module you will create custom data streams to solve a real-world, real-time analytics problem."><meta property="og:image" content="https://rotational.io/img/blog/waterfall.jpg"><meta property="og:url" content="https://rotational.io/blog/pubsub-101---creating-data-flows-with-topics/"><meta property="og:type" content="website"><meta name=twitter:title content="PubSub 101 - Creating Data Flows With Topics"><meta name=twitter:card content="summary"><meta name=twitter:description content="In this module you will create custom data streams to solve a real-world, real-time analytics problem."><meta name=twitter:image content="https://rotational.io/img/blog/waterfall.jpg"><link rel="shortcut icon" href=https://rotational.io/img/favicon.png type=image/x-icon><link rel=icon href=https://rotational.io/img/favicon.png type=image/x-icon><link rel=alternate type=application/rss+xml href=https://rotational.io//index.xml title="Recent Rotations of the Rotational Labs Blog"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.5/flowbite.min.css><link rel=stylesheet href=https://unpkg.com/@highlightjs/cdn-assets/styles/default.min.css><link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap" rel=stylesheet><link rel=stylesheet href=https://rotational.io/output.css media=screen><script async src="https://www.googletagmanager.com/gtag/js?id=G-2FKX6CWJHW"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-2FKX6CWJHW")</script><script src="https://www.google.com/recaptcha/enterprise.js?render=6Ld5O3kiAAAAAJU0z0h81X1RxEMHyoROe6KWe_vk"></script>
<script>grecaptcha.enterprise.ready(function(){grecaptcha.enterprise.execute("6Ld5O3kiAAAAAJU0z0h81X1RxEMHyoROe6KWe_vk",{action:"homepage"}).then(function(){})})</script><script src=https://kit.fontawesome.com/2c36e9b7b1.js crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr/lunr.js></script></head><body class="bg-hexagon bg-center bg-contain"><div class="relative bg-[#1D65A6]"><nav class="relative max-w-7xl mx-auto flex items-center justify-between text-white px-4 sm:px-6 z-[9999] py-5" aria-label=Global><a href=/><img src=img/logo.png alt="Rotational Lab logo" class="h-14 w-auto sm:h-14"></a><ul class=topnav id=myTopnav><li><span><div class=ensign-menu>Ensign
<button type=button onclick=showEnsignMenu() id=open-ensign-menu-bttn>
<i class="fa fa-caret-down" aria-hidden=true></i>
<span class=sr-only>Open menu</span></button>
<button type=button onclick=hideEnsignMenu() id=close-ensign-menu-bttn>
<i class="fa fa-caret-up" aria-hidden=true></i>
<span class=sr-only>Close menu</span></button></div></span><ul id=ensign-dropdown-menu><li><a href=/ensign/>- Ensign for Data Teams</a></li><li><a href=/ensign-enterprise/>- Ensign for Enterprise</a></li><li><a href=/ensign-pricing/>- Pricing</a></li></ul></li><li><a href=/services/>Services</a></li><li><a href=/blog/>Blog</a></li><li><a href=/about/>About</a></li><li><a href=/contact/>Request a Demo</a></li><li><a href=https://rotational.app/register>Get Ensign Free</a></li><a class=icon onclick=openMobNav()><i class="fa fa-bars"></i></a></ul></nav></div><main><div class="relative max-w-7xl mx-auto px-4 sm:px-6"><div class=mt-14><div class=blog-img><img src=https://rotational.io/img/blog/waterfall.jpg alt="PubSub 101 - Creating Data Flows With Topics" class="mx-auto object-cover"></div><div class=mt-8><h3 class="font-bold text-xl sm:text-2xl lg:text-3xl text-center" data-blog-title="PubSub 101 - Creating Data Flows With Topics"><b class=text-[#1D65A6]>PubSub</b>
101 - Creating Data Flows With Topics</h3><div class="flex flex-wrap justify-center items-center my-4"><a href=/authors/patrick-deziel><img src=img/team/patrick-deziel.png alt class="mr-3 border-4 border-white rounded-full h-11 drop-shadow-lg"></a>
<span class=blog-date><a href=/authors/patrick-deziel class=single-multi-author>Patrick Deziel</a> | Wednesday, Nov 22, 2023 |&nbsp;</span>
<span><a href=/tags/ensign class=blog-tag>Ensign</a></span>
<a href=/tags/data-streaming class=blog-tag>Data Streaming</a></span>
<a href=/tags/pubsub-101 class=blog-tag>PubSub 101</a></span></div><article class="max-w-[800px] mx-auto prose"><p>If you struggle to build analytics and models that keep up with changing data, it might be because you haven&rsquo;t yet learned to think about data in terms of <code>topics</code>. In this module, learn how by solving a real-world, real-time problem!</p><p>Check out <a href=https://rotational.io/blog/pubsub-101---creating-your-project/>Part One</a> and <a href=https://rotational.io/blog/pubsub-101---using-the-python-sdk/>Part Two</a> of this series if you missed them!</p><h2 id=how-relational-databases-cause-model-drift>How Relational Databases Cause Model Drift</h2><p>Our favorite SQL databases (PostgreSQL, sqlite, DuckDB, etc) are fantastic for working with tabular data, but at best they only tell us the current state of our data. But what if our analytics need to model how that data is changing over time (e.g. model drift, concept drift, data drift)? What if we need to compare the current state of our data to what it looked like this time last year?</p><p>If you find yourself asking the above questions, it&rsquo;s a good sign that you might benefit from reframing your thinking from the <strong>static perspective</strong> of data (aka &ldquo;snapshots&rdquo;) to a <strong>streaming perspective</strong>.</p><p>You can encourage this reframing using a technique called <strong>change data capture</strong> (CDC), which is a method for capturing the individual changes to a database over time.</p><p><a href=https://ensign.rotational.dev/>Ensign</a> is a great way to instrument change data capture, since it can be used to reconstruct the state of your relational database at any point in time, reprocess previously consumed data in the exact same order that it was produced (for model reproducibility), or identify data drift in real-time.</p><h2 id=how-to-think-in-topics>How to Think in Topics</h2><p>An Ensign <code>topic</code> is a globally ordered and globally distributed stream of <code>events</code>. They are somewhat analogous to the concept of tables in a relational database, however there are a few important differences:</p><table><thead><tr><th>Property</th><th>Tables</th><th>Topics</th></tr></thead><tbody><tr><td>Mutability</td><td>Can create, read, update, delete rows</td><td>Events are immutable - can only publish new Events</td></tr><tr><td>Heterogenity</td><td>Columns usually have singular data types</td><td>Events can have varying data types and schemas</td></tr><tr><td>Ordering</td><td>Rows are not explicitly ordered and ordering usually happens at query time</td><td>Events have a defined ordering and the ordering is consistent across replicas</td></tr></tbody></table><p>Consider a retail store that tracks inventory using a relational database. It might have one table called <code>Products</code> so that new products can be registered and their prices can be updated regularly, and another table called <code>Inventory</code> with foreign key relationships to view and update the availability of specific products within the store.</p><p>If we were to redesign this as an event-driven architecture, we might include a <code>product-updates</code> topic to track updates to product names, prices, etc. and an <code>inventory-updates</code> topic to track changes to product inventory. The individual <code>events</code> are updates to those topics, similar to how we would use the <code>ADD</code>, <code>UPDATE</code>, and <code>DELETE</code> SQL keywords to update rows in the relational database.</p><p>Here, the <code>topics</code> track the <em>changes</em> to the products and inventory rather than just the current state of the inventory.</p><h2 id=designing-data-flows>Designing Data Flows</h2><p>Now let&rsquo;s return to our flight-tracking project from <a href=https://rotational.io/blog/pubsub-101---creating-your-project/>Part One</a> of this course.</p><p>Suppose we want to track aircraft flights in the hopes of building a real-time model to predict flight delays. One of the first steps is to think about what kinds of data will be flowing through the application.</p><ol><li>The positions of ongoing flights.</li><li>The trained models and the data they were trained on.</li><li>The arrival predictions made by the models.</li></ol><p><img src=/img/blog/2023-11-20-pubsub-101---creating-data-flows-with-topics/topics.png alt="&ldquo;Data Flows&rdquo;"></p><p>The above diagram loosely represents <em>how</em> the data will flow through the application. We will ingest data from an API into a <code>flight-updates</code> topic, use it to train real-time models for the <code>arrival-models</code> topic, and eventually expose model inferences to users via the <code>arrival-predictions</code> topic.</p><p>One advantage of event-driven architectures is that the topics are completely decoupled. Each component of the application can be tested independently, and we can feel free to experiment without breaking the prototype. For example, if we want to include weather data as a feature for model training we can simply add a <code>weather-updates</code> topic.</p><h2 id=to-be-continued>To be continued&mldr;</h2><p>In the <a href=/blog/pubsub-101---creating-a-publisher/>next module</a>, you&rsquo;ll create a real-time publisher to query an API and publish flight data to Ensign!</p></article></div></div><div class="bg-[#E8EFF6] max-w-[800px] mx-auto mt-9 p-8 rounded-lg"><h3 class="font-bold text-xl sm:text-2xl lg:text-3xl text-center mb-3"><span class="text-[#1D65A6] font-bold">About</span>
This Post</h3><p class="text-base mx-auto px-2 text-center lg:text-base">In this module you will create custom data streams to solve a real-world, real-time analytics problem.</p><div class="flex flex-col md:flex-row text-center mx-auto border-t pt-6 mt-6 align-center justify-between gap-10"><div class=lg:w-1/2><h2 class="text-lg text-[#1D65A6] font-bold mb-3">Written by:</h2><div class="flex items-center"><a href=/authors/patrick-deziel><img src=img/team/patrick-deziel.png alt class="mr-3 border-4 border-white rounded-full h-11 drop-shadow-lg"></a>
<span class="flex flex-wrap"><a href=/authors/patrick-deziel class="single-multi-author lg:w-[20ch] mx-2">Patrick Deziel</a></span></div></div><div class=lg:w-1/2><h2 class="text-lg text-[#1D65A6] font-bold mb-3">Share this post:</h2><ul class="flex items-center justify-center gap-6 mt-4"><li><a onclick=shareByEmail() class=cursor-pointer><img src=img/email.png alt class="rounded-lg bg-white p-3"></a></li><li><a onclick=shareOnTwitterWithTitle() class=cursor-pointer><img src=img/twitter.png alt class="rounded-lg bg-white p-3"></a></li><li><a onclick=shareOnLinkedIn() class=cursor-pointer><img src=img/linkedin.png alt class="rounded-lg bg-white p-3"></a></li></ul></div></div></div><div class="relative max-w-7xl mx-auto px-4 sm:px-6"><div class="flex justify-between mt-12 sm:mt-24 items-center"><h2 class="font-bold text-2xl sm:text-4xl flex"><span><b class=text-[#1D65A6]>Recent</b>
Rotations</span>
<img src=img/butterfly.png alt=butterfly class="ml-4 h-6 sm:h-8 relative top-1"></h2><div><a href=/blog class="flex text-base sm:text-lg items-center font-bold text-[#1D65A6]"><span>View all</span>
<img src=img/arr-right.png alt class="h-4 ml-2"></a></div></div><div><div class="grid md:grid-cols-2 xl:grid-cols-3 gap-8 sm:mt-16"><div class=mt-6><div class=article><a class=block href=https://rotational.io/blog/real-time-flight-delays/><img src=https://rotational.io/img/blog/2024-01-09-real-time-flight-delays/nasa-virtual-airport.jpg alt class="rounded-t-xl object-cover" style=height:212px;width:100%></a><div class="bg-[#ECF6FF] rounded-b-xl"><div class="px-6 pt-4"><ul class="flex whitespace-nowrap"><li class="blog-tag text-base font-bold text-[#1D65A6]"><a href=/tags/hackathon>Hackathon</a></li><li class="blog-tag text-base font-bold text-[#1D65A6]"><a href=/tags/data-science>Data Science</a></li><li class="blog-tag text-base font-bold text-[#1D65A6]"><a href=/tags/ensign>Ensign</a></li></ul><h3 class="text-xl font-extrabold mt-3 pb-2"><a class="block h-auto md:h-24" href=https://rotational.io/blog/real-time-flight-delays/>How to Build a Real-Time Model to Predict Flight Delays</a></h3><div class='h-auto md:h-36'><p class="mt-3 md:mt-8 text-base">Have you ever tried to build a model that can handle new data in real time? We set out to do just that, and discovered that there aren&rsquo;t a lot of tutorials about training real-time machine learning models, so we made this one!</p></div></div><div class="flex justify-between items-center px-6 py-3 border-t mt-6"><div class="flex items-center"><img src=img/butterfly.png alt class="rounded-full h-10 w-10"><ul class="flex flex-wrap ml-4"><li class="list-multi-author font-extralight"><a href=/authors/jason-chandra>Jason Chandra</a></li><li class="list-multi-author font-extralight"><a href=/authors/kevin-sianto>Kevin Sianto</a></li><li class="list-multi-author font-extralight"><a href=/authors/toby-chiu>Toby Chiu</a></li></ul></div><div class=font-extralight>Jan 9, 2024</div></div></div></div></div><div class=mt-6><div class=article><a class=block href=https://rotational.io/blog/pubsub-101---querying-topics/><img src=https://rotational.io/img/blog/otter_investigator.png alt class="rounded-t-xl object-cover" style=height:212px;width:100%></a><div class="bg-[#ECF6FF] rounded-b-xl"><div class="px-6 pt-4"><ul class="flex whitespace-nowrap"><li class="blog-tag text-base font-bold text-[#1D65A6]"><a href=/tags/ensign>Ensign</a></li><li class="blog-tag text-base font-bold text-[#1D65A6]"><a href=/tags/ensql>enSQL</a></li><li class="blog-tag text-base font-bold text-[#1D65A6]"><a href=/tags/pubsub-101>PubSub 101</a></li></ul><h3 class="text-xl font-extrabold mt-3 pb-2"><a class="block h-auto md:h-24" href=https://rotational.io/blog/pubsub-101---querying-topics/>PubSub 101 - Querying Topics with SQL</a></h3><div class='h-auto md:h-36'><p class="mt-3 md:mt-8 text-base">Real-time data streams are powerful, but sometimes you need to convert the stream into a batch or replay parts of the stream. Here&rsquo;s how to write customized SQL to more deeply understand and interact with your historic data.</p></div></div><div class="flex justify-between items-center px-6 py-3 border-t mt-6"><div class="flex items-center"><a href=/authors/patrick-deziel class="flex items-center"><img src=img/team/patrick-deziel.png alt class="rounded-full h-10 w-10">
<span class="ml-4 font-extralight">Patrick Deziel</span></a></div><div class=font-extralight>Dec 8, 2023</div></div></div></div></div><div class=mt-6><div class=article><a class=block href=https://rotational.io/blog/pubsub-101---creating-a-subscriber/><img src=https://rotational.io/img/blog/newspaper.jpg alt class="rounded-t-xl object-cover" style=height:212px;width:100%></a><div class="bg-[#ECF6FF] rounded-b-xl"><div class="px-6 pt-4"><ul class="flex whitespace-nowrap"><li class="blog-tag text-base font-bold text-[#1D65A6]"><a href=/tags/ensign>Ensign</a></li><li class="blog-tag text-base font-bold text-[#1D65A6]"><a href=/tags/online-learning>Online Learning</a></li><li class="blog-tag text-base font-bold text-[#1D65A6]"><a href=/tags/pubsub-101>PubSub 101</a></li></ul><h3 class="text-xl font-extrabold mt-3 pb-2"><a class="block h-auto md:h-24" href=https://rotational.io/blog/pubsub-101---creating-a-subscriber/>PubSub 101 - Creating a Subscriber</a></h3><div class='h-auto md:h-36'><p class="mt-3 md:mt-8 text-base">With the rise of LLMs and Retrieval Augmented Generation (RAG), online models have never been more relevant. Here&rsquo;s how to write some Python code to interpret real-time data and build your own adaptive online model.</p></div></div><div class="flex justify-between items-center px-6 py-3 border-t mt-6"><div class="flex items-center"><a href=/authors/patrick-deziel class="flex items-center"><img src=img/team/patrick-deziel.png alt class="rounded-full h-10 w-10">
<span class="ml-4 font-extralight">Patrick Deziel</span></a></div><div class=font-extralight>Dec 5, 2023</div></div></div></div></div></div></div></div></div><div class="bg-[#1D65A6] max-w-[800px] mx-auto mt-20 py-14 px-12 md:px-16 text-white md:rounded-lg"><form action=blog method=post id=newsletterForm><h6 class="font-bold text-center">Enter Your Email To Subscribe</h6><label for=email class=hidden>Email</label>
<input type=text name=email id=email required placeholder class="w-full px-4 py-2.5 rounded-lg mt-6 text-black" style=color:#000><div class="flex mt-6 items-start"><input type=checkbox id=checkbox required class="w-6 h-6 block border-0">
<label for=checkbox><span class="ml-2 text-left">I want to receive the monthly newsletter and other updates from Rotational. You agree to our Privacy Policy. You may unsubscribe at any time.*</span></label></div><div class="bg-teal-100 border-t-4 border-teal-500 mt-10 rounded-b text-teal-900 px-4 py-3 shadow-md hidden" id=newsletter-alert role=alert><div class=flex><div><p class=text-sm>Thank you for your interest!</p></div></div></div><div class="flex justify-center"><button type=submit class="bg-[#192E5B] px-14 py-4 mt-10 rounded-lg text-sm text-white uppercase md:text-base">
Submit</button></div></form></div></main><div id=footerBackground><footer class="bg-hero-footer bg-cover"><div class="pt-[350px] font-extralight text-white"><div class="max-w-7xl mx-auto px-6"><div class="max-[650px]:text-center sm:grid grid-cols-3"><div class="my-10 sm:my-0"><h5 class=mb-3>PRODUCT</h5><ul><li class=pb-3><a href=https://rotational.app target=_blank class=font-bold>Ensign</a></li><li class=pb-3><a href=/ensign-pricing target=_blank class=font-bold>Pricing</a></li><li class=pb-3><a href=https://ensign.rotational.dev/getting-started/ target=_blank class=font-bold>Docs</a></li><li class=pb-3><a href=https://ensign.rotational.dev/sdk/ target=_blank class=font-bold>SDKs</a></li><li class=pb-3><a href=https://status.rotational.dev/ target=_blank class=font-bold>Status</a></li></ul></div><div class="mb-10 sm:mb-0"><h5 class=mb-3>COMPANY</h5><ul><li class=pb-3><a href=/services class=font-bold>Services</a></li><li class=pb-3><a href=/blog class=font-bold>Blog</a></li><li class=pb-3><a href=/about class=font-bold>About</a></li></ul></div><div><h5 class=mb-3>COMMUNITY</h5><ul><li class=pb-3><a href=/ensign-u class=font-bold>Ensign U</a></li><li class=pb-3><a href=/data-playground class=font-bold>Data Playground</a></li><li class=pb-3><a href=/opensource class=font-bold>Open Source</a></li><li class=pb-3><a href=/resources class=font-bold>Resources</a></li></ul></div></div><div class="max-w-7xl sm:flex justify-between border-t py-6 mt-12 sm:mt-32"><div class="mx-auto xl:ml-5 sm:mt-0 mt-8"><div><ul class="mx-auto grid grid-cols-2 gap-x-20 md:gap-x-32 lg:grid-cols-4"><li class="pb-8 mt-1"><a href=https://twitter.com/rotationalio class="flex items-center p-2 hover:rounded-full hover:bg-icon-hover" target=_blank><img src=img/footer/twitter.svg alt class=scale-75>
<span class=ml-4>Twitter</span></a></li><li class="pb-8 mt-1"><a href=https://github.com/rotationalio class="flex items-center p-2 hover:rounded-full hover:bg-icon-hover" target=_blank><img src=img/footer/github.svg alt class=scale-[.8]>
<span class=ml-4>GitHub</span></a></li><li class=pb-8><a href=https://www.linkedin.com/company/rotational class="flex items-center p-2 hover:rounded-full hover:bg-icon-hover" target=_blank><img src=img/footer/linkedin.svg alt class=scale-75>
<span class="mt-2 ml-4">LinkedIn</span></a></li><li class="pb-8 mt-2"><a href=mailto:info@rotational.io class="flex items-center p-2 hover:rounded-full hover:bg-icon-hover" target=_blank><img src=img/footer/email.svg alt class=scale-[.8]>
<span class=ml-4>Email</span></a></li></ul></div></div></div><div class="sm:flex justify-between py-6"><p>Copyright © Rotational Labs, Inc. 2021–2024 · All Rights Reserved</p><div><ul class="sm:mt-0 mt-4 flex"><li class="border-r pr-4 mr-4"><a href=/privacy/>Privacy Policy</a></li><li><a href=/terms/>Terms of Use</a></li></ul></div></div></div></div></div></footer></div><script src=https://rotational.io/js/app.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.5/flowbite.min.js></script>
<script src=https://unpkg.com/@highlightjs/cdn-assets/highlight.min.js></script></body></html>