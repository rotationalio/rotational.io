{{ $data := index site.Data site.Language.Lang }}

{{ if $data.ensign.competition.enable }}
{{ with $data.ensign.competition }}
<section id="competitive-landscape" class="text-base text-xl pb-20">
  <h2 class="pb-5 leading-normal font-bold text-3xl">
    Competitive Landscape
  </h2>
  <p class="pb-5">
    How does Ensign stack up to other, similar tools and products?
  <p>

  <table class="table-auto border-collapse border border-slate-600 w-full text-md">
    <thead>
      <!-- TODO: not sure how to extract categories from the data yet -->
      <tr class="bg-[#1D65A6]">
        <th rowspan="2" class="text-left border bg-[#1D65A6] border-slate-600 p-4 pl-8 py-3 text-white">Feature</th>
        <th colspan="5" class="border bg-[#1D65A6] border-slate-600 px-4 py-3 text-white">Eventing Tools</th>
        <th colspan="3" class="border bg-[#1D65A6] border-slate-600 px-4 py-3 text-white">Databases</th>
      </tr>
      <tr class="bg-[#1D65A6]">
        {{ range .projects }}
        <th class="text-center border bg-[#1D65A6] border-slate-600 px-3 py-3 text-white">
        {{ .name }}{{ if .company }}<br />
        <span class="text-white text-sm">({{ .company }})</span>{{ end }}
        </th>
        {{ end }}
      </tr>
    </thead>
    <tbody>
      {{ $projects := .projects }}
      {{ range .features }}
      <tr class="bg-white">
        <td class="text-left px-2 py-2 border border-slate-600">
          {{ .title | markdownify }}<br />
          <span class="text-sm">{{ .subtitle }}</span>
        </td>
        {{ $id := .id }}
        {{ range $projects }}
        <td class="text-center text-[#00743f] px-2 py-2 border border-slate-600">{{ if (index .features $id) }}âœ”{{ end }}</td>
        {{ end }}
      </tr>
      {{ end }}
    </tbody>
  </table>

{{ end }}
{{ end }}